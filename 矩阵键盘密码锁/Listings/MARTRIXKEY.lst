C51 COMPILER V9.60.7.0   MARTRIXKEY                                                        02/23/2026 21:46:00 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MARTRIXKEY
OBJECT MODULE PLACED IN .\Objects\MARTRIXKEY.obj
COMPILER INVOKED BY: D:\KeilC51\C51\BIN\C51.EXE MARTRIXKEY.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listing
                    -s\MARTRIXKEY.lst) OBJECT(.\Objects\MARTRIXKEY.obj)

line level    source

   1          #include <REGX52.h>
   2          #include "Delay.h"
   3          /**
   4                  * @brief  从左到右按列扫描矩阵键盘
   5                  * @param  没有
   6                  * @retval KeyNumber按下的按键
   7          
   8          按下不放则会停留在此函数
   9          
  10          */
  11          
  12          unsigned int MatrixKey ()
  13          {
  14   1              unsigned int KeyNumber=0;
  15   1              
  16   1              //列1
  17   1              P1=0xFF;
  18   1              P1_3=0;
  19   1              if(P1_7==0)
  20   1              {
  21   2                      Delay(20);
  22   2                      while(P1_7==0);
  23   2                      Delay(20);
  24   2                      KeyNumber=1;
  25   2              }
  26   1              if(P1_6==0)
  27   1              {
  28   2                      Delay(20);
  29   2                      while(P1_6==0);
  30   2                      Delay(20);
  31   2                      KeyNumber=5;
  32   2              }
  33   1              if(P1_5==0)
  34   1              {
  35   2                      Delay(20);
  36   2                      while(P1_5==0);
  37   2                      Delay(20);
  38   2                      KeyNumber=9;
  39   2              }
  40   1              if(P1_4==0)
  41   1              {
  42   2                      Delay(20);
  43   2                      while(P1_4==0);
  44   2                      Delay(20);
  45   2                      KeyNumber=13;
  46   2              }
  47   1              //列2
  48   1              P1=0xFF;
  49   1              P1_2=0;
  50   1              if(P1_7==0)
  51   1              {
  52   2                      Delay(20);
  53   2                      while(P1_7==0);
  54   2                      Delay(20);
C51 COMPILER V9.60.7.0   MARTRIXKEY                                                        02/23/2026 21:46:00 PAGE 2   

  55   2                      KeyNumber=2;
  56   2              }
  57   1              if(P1_6==0)
  58   1              {
  59   2                      Delay(20);
  60   2                      while(P1_6==0);
  61   2                      Delay(20);
  62   2                      KeyNumber=6;
  63   2              }
  64   1              if(P1_5==0)
  65   1              {
  66   2                      Delay(20);
  67   2                      while(P1_5==0);
  68   2                      Delay(20);
  69   2                      KeyNumber=10;
  70   2              }
  71   1              if(P1_4==0)
  72   1              {
  73   2                      Delay(20);
  74   2                      while(P1_4==0);
  75   2                      Delay(20);
  76   2                      KeyNumber=14;
  77   2              }
  78   1              //列3
  79   1              P1=0xFF;
  80   1              P1_1=0;
  81   1              if(P1_7==0)
  82   1              {
  83   2                      Delay(20);
  84   2                      while(P1_7==0);
  85   2                      Delay(20);
  86   2                      KeyNumber=3;
  87   2              }
  88   1              if(P1_6==0)
  89   1              {
  90   2                      Delay(20);
  91   2                      while(P1_6==0);
  92   2                      Delay(20);
  93   2                      KeyNumber=7;
  94   2              }
  95   1              if(P1_5==0)
  96   1              {
  97   2                      Delay(20);
  98   2                      while(P1_5==0);
  99   2                      Delay(20);
 100   2                      KeyNumber=11;
 101   2              }
 102   1              if(P1_4==0)
 103   1              {
 104   2                      Delay(20);
 105   2                      while(P1_4==0);
 106   2                      Delay(20);
 107   2                      KeyNumber=15;
 108   2              }
 109   1              //列4
 110   1              P1=0xFF;
 111   1              P1_0=0;
 112   1              if(P1_7==0)
 113   1              {
 114   2                      Delay(20);
 115   2                      while(P1_7==0);
 116   2                      Delay(20);
C51 COMPILER V9.60.7.0   MARTRIXKEY                                                        02/23/2026 21:46:00 PAGE 3   

 117   2                      KeyNumber=4;
 118   2              }
 119   1              if(P1_6==0)
 120   1              {
 121   2                      Delay(20);
 122   2                      while(P1_6==0);
 123   2                      Delay(20);
 124   2                      KeyNumber=8;
 125   2              }
 126   1              if(P1_5==0)
 127   1              {
 128   2                      Delay(20);
 129   2                      while(P1_5==0);
 130   2                      Delay(20);
 131   2                      KeyNumber=12;
 132   2              }
 133   1              if(P1_4==0)
 134   1              {
 135   2                      Delay(20);
 136   2                      while(P1_4==0);
 137   2                      Delay(20);
 138   2                      KeyNumber=16;
 139   2              }
 140   1              
 141   1              return KeyNumber;
 142   1      
 143   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    445    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
