C51 COMPILER V9.60.7.0   MARTRIXKEY                                                        02/28/2026 16:01:15 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MARTRIXKEY
OBJECT MODULE PLACED IN .\Objects\MARTRIXKEY.obj
COMPILER INVOKED BY: D:\KeilC51\C51\BIN\C51.EXE MARTRIXKEY.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listing
                    -s\MARTRIXKEY.lst) OBJECT(.\Objects\MARTRIXKEY.obj)

line level    source

   1          #include <REGX52.h>
   2          #include "Delay.h"
   3          /**
   4                  * @brief  从左到右按列扫描矩阵键盘
   5                  * @param  没有
   6                  * @retval KeyNumber按下的按键0~9,没按返回16
   7          
   8          按下不放则会停留在此函数
   9          
  10          */
  11          
  12          unsigned int MatrixKey ()
  13          {
  14   1              unsigned int KeyNumber=16;
  15   1              
  16   1              //列1
  17   1              P1=0xFF;
  18   1              P1_3=0;
  19   1              if(P1_7==0)
  20   1              {
  21   2                      Delay(20);
  22   2                      while(P1_7==0);
  23   2                      Delay(20);
  24   2                      KeyNumber=1;
  25   2              }
  26   1              if(P1_6==0)
  27   1              {
  28   2                      Delay(20);
  29   2                      while(P1_6==0);
  30   2                      Delay(20);
  31   2                      KeyNumber=4;
  32   2              }
  33   1              if(P1_5==0)
  34   1              {
  35   2                      Delay(20);
  36   2                      while(P1_5==0);
  37   2                      Delay(20);
  38   2                      KeyNumber=7;
  39   2              }
  40   1              //列2
  41   1              P1=0xFF;
  42   1              P1_2=0;
  43   1              if(P1_7==0)
  44   1              {
  45   2                      Delay(20);
  46   2                      while(P1_7==0);
  47   2                      Delay(20);
  48   2                      KeyNumber=2;
  49   2              }
  50   1              if(P1_6==0)
  51   1              {
  52   2                      Delay(20);
  53   2                      while(P1_6==0);
  54   2                      Delay(20);
C51 COMPILER V9.60.7.0   MARTRIXKEY                                                        02/28/2026 16:01:15 PAGE 2   

  55   2                      KeyNumber=5;
  56   2              }
  57   1              if(P1_5==0)
  58   1              {
  59   2                      Delay(20);
  60   2                      while(P1_5==0);
  61   2                      Delay(20);
  62   2                      KeyNumber=8;
  63   2              }
  64   1              if(P1_4==0)
  65   1              {
  66   2                      Delay(20);
  67   2                      while(P1_4==0);
  68   2                      Delay(20);
  69   2                      KeyNumber=0;
  70   2              }
  71   1              //列3
  72   1              P1=0xFF;
  73   1              P1_1=0;
  74   1              if(P1_7==0)
  75   1              {
  76   2                      Delay(20);
  77   2                      while(P1_7==0);
  78   2                      Delay(20);
  79   2                      KeyNumber=3;
  80   2              }
  81   1              if(P1_6==0)
  82   1              {
  83   2                      Delay(20);
  84   2                      while(P1_6==0);
  85   2                      Delay(20);
  86   2                      KeyNumber=6;
  87   2              }
  88   1              if(P1_5==0)
  89   1              {
  90   2                      Delay(20);
  91   2                      while(P1_5==0);
  92   2                      Delay(20);
  93   2                      KeyNumber=9;
  94   2              }
  95   1      
  96   1              
  97   1              return KeyNumber;
  98   1      
  99   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    285    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
