C51 COMPILER V9.60.7.0   MAIN                                                              02/28/2026 23:44:22 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\KeilC51\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Timer0_Init.H"
   3          #include "Timer1_Init.H"
   4          #include "BuzzerPlay.H"
   5          #include "LCD1602.H"
   6          #include "MATRIXKEY.H"
   7          #include "Delay.h"
   8          #include <stdio.h>
   9          
  10          
  11          
  12          unsigned char DownCount=40,DownCountMod=1;
  13          unsigned long int Password=0;
  14          
  15          
  16          unsigned long int GetPassword()
  17          {
  18   1              unsigned char Key=16;
  19   1              Key=MatrixKey();
  20   1              if(Key!=16&&Password/1000000==0) //16代表没有按下矩阵键盘
  21   1              {
  22   2                      if(Key>=0 &&Key<=9)
  23   2                      {
  24   3                              Password*=10;
  25   3                              Password+=Key;
  26   3                      }
  27   2              }
  28   1              return Password;
  29   1      }
  30          
  31          
  32          void main ()
  33          {
  34   1              unsigned char flag=0;
  35   1              unsigned char str[7]={0};
  36   1              unsigned long int Password=0;
  37   1      
  38   1              LCD_Init();
  39   1              LCD_ShowString(1,8,"C4");
  40   1              LCD_ShowString(2,5,"_______");
  41   1      
  42   1              while(1)
  43   1              {
  44   2                      
  45   2                      //获取密码
  46   2                      if(Password/1000000==0)
  47   2                      {                       
  48   3                              Password=GetPassword();
  49   3                              if(Password!=0)
  50   3                              {
  51   4                                      sprintf(str,"%ld",Password);//让LCD1602可以显示7位数字
  52   4                                      LCD_ShowString(2,5,str);                                
  53   4                              }               
  54   3                      }
C51 COMPILER V9.60.7.0   MAIN                                                              02/28/2026 23:44:22 PAGE 2   

  55   2                      
  56   2                      //判断密码是否正确
  57   2                      if(Password/1000000!=0)
  58   2                      {
  59   3                              if(Password==7355608&&flag!=1)
  60   3                              {
  61   4                                      Timer0_Init();
  62   4                                      Timer1_Init();
  63   4                                      LCD_ShowString(1,1,"Bomb has been ");
  64   4                                      LCD_ShowString(2,1,"planted.        ");
  65   4                                      flag=1;
  66   4                              }
  67   3                              else if(Password!=7355608)
  68   3                              {
  69   4                                      Password=0;
  70   4                                      LCD_ShowString(2,5,"       ");
  71   4                                      LCD_ShowString(1,6,"WRONG!");
  72   4                                      Delay(20000);
  73   4                                      LCD_ShowString(1,6,"      ");
  74   4                                      LCD_ShowString(1,8,"C4");
  75   4                                      LCD_ShowString(2,5,"_______");
  76   4                              }
  77   3                      }
  78   2                      
  79   2                      //引爆模式
  80   2                      if(flag==1)
  81   2                      {                       
  82   3                              LCD_ShowNum(2,15,DownCount,2);                  
  83   3                              if(DownCount==0)
  84   3                              {
  85   4                                      LCD_ShowNum(2,1,DownCount,2);
  86   4                                      TR1=0;
  87   4                                      TR0=0;
  88   4                                      EA=0;
  89   4                                      LCD_ShowString(1,1,"!!!!!!Boom!!!!!!");
  90   4                                      LCD_ShowString(2,1,"!!!!!!!!!!!!!!!!");
  91   4                                      BuzzerPlay(65534);
  92   4                              }                               
  93   3                      }
  94   2                      
  95   2              }
  96   1      }
  97          
  98          void Timer0_Routine() interrupt 1
  99          {
 100   1              static unsigned int Counter0=0;
 101   1              TH0=0xFC;
 102   1              TL0=0x66;
 103   1              Counter0++;
 104   1              if(Counter0>=1000)
 105   1              {
 106   2                      Counter0=0;
 107   2                      DownCount--;
 108   2                      if(DownCount<=0)
 109   2                      {
 110   3                              DownCountMod=4;
 111   3                      }
 112   2                      else if(DownCount<=10)
 113   2                      {
 114   3                              DownCountMod=3;
 115   3                      }
 116   2                      else if(DownCount<=30)
C51 COMPILER V9.60.7.0   MAIN                                                              02/28/2026 23:44:22 PAGE 3   

 117   2                      {
 118   3                              DownCountMod=2;
 119   3                      }
 120   2                      else if(DownCount<=40)
 121   2                      {
 122   3                              DownCountMod=1;
 123   3                      }
 124   2                      
 125   2              }
 126   1              
 127   1      }
 128          
 129          void Timer1_Routine() interrupt 3
 130          {
 131   1              static unsigned int Counter1=0;
 132   1              TH1=0xFC;
 133   1              TL1=0x66;
 134   1              Counter1++;
 135   1              if(DownCountMod==3)
 136   1              {
 137   2                      if(Counter1>=333)
 138   2                      {
 139   3                              BuzzerPlay(1000);
 140   3                              Counter1=0;
 141   3                      }
 142   2              }
 143   1              if(DownCountMod==2)
 144   1              {
 145   2                      if(Counter1>=500)
 146   2                      {
 147   3                              BuzzerPlay(1000);
 148   3                              Counter1=0;
 149   3                      }
 150   2              }
 151   1              if(DownCountMod==1)
 152   1              {
 153   2                      if(Counter1>=1000)
 154   2                      {
 155   3                              BuzzerPlay(1000);
 156   3                              Counter1=0;
 157   3                      }
 158   2              }
 159   1              
 160   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    808    ----
   CONSTANT SIZE    =    110    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     10      13
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
